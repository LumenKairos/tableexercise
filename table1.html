<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Mon tableau</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.14.7/react.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.14.7/react-dom.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.23/browser.min.js"></script>
    <style>
    h1 {
      color: green;
    }
    th, td {
      border: 1px solid black;
      padding: 10px;
      }

    </style>
  </head>
  <body>
    <h1>Mon TABLEAU</h1>
    <div id="tableau"></div>

    <script  type="text/babel">
var TABLECONTENT = [
  ["","Col 1 Title","Col 2 Title"],
  ["Row 1 Title","Cell 1 Row 1", "Cell 2 Row 1"],
  ["Row 2 Title","Cell 1 Row 2", "Cell 2 Row 2"]
];
    
var Row = React.createClass({
    render: function () {
      return (
        
        <tr>
          {this.props.row.map(function(cell,index) {
          return (
            <td key={index}>
              {cell}
              
            </td>
          );
          })}
        </tr>
      );
    }
});

var App = React.createClass({
    getInitialState: function () {
      return {
        tableContent: TABLECONTENT
      }
    }
    ,addRow: function () {
      var title = prompt("Enter the row title");
      var row = []
      for(var i = 0; i<TABLECONTENT[0].length;i++) {
        if(i===0) {
          row.push(title);
        } else {
          row.push("");
        }
      }
      TABLECONTENT.push(row);
       this.setState({
        tableContent:TABLECONTENT
        
      })
    }
    ,addCol: function () {
      var title = prompt("Enter the col title");
      for(var i=0;i<TABLECONTENT.length;i++) {
        if(i===0){
          TABLECONTENT[i].push(title);
        } else {
          TABLECONTENT[i].push("");
        }
      }
      this.setState({
        tableContent:TABLECONTENT
      })
    }
    ,edit : function () {
    
    }
    ,render: function () {
    console.log('My name is react and I am working');
      return (
        <div>
          <table>
            <thead>
              <tr>
                {this.state.tableContent[0].map(function (cell,index) {
                  return (<th key={index}>{cell}</th>)
                })}
              </tr>
            </thead>
            <tbody>
              {this.state.tableContent.map(function (row, index) {
                  if (index > 0) {
                    return (<Row key={index} row={row}/>)
                  }
                })}
            </tbody>
          </table>
          <button onClick={this.addRow}>Add a row</button>
          <button onClick={this.addCol}>Add a col</button>
        </div>
      );
    }

});

 ReactDOM.render(
      <App/>, document.getElementById('tableau')
    );

    </script>
  
  </body>
</html>
